# Ultralytics YOLO ğŸš€, AGPL-3.0 è®¸å¯è¯
# Global Wheat 2020 æ•°æ®é›† https://www.global-wheat.com/ ç”±è¨æ–¯å–€å½»æ¸©å¤§å­¦æä¾›
# æ–‡æ¡£ï¼šhttps://docs.ultralytics.com/datasets/detect/globalwheat2020/
# ç¤ºä¾‹ç”¨æ³•ï¼šyolo train data=GlobalWheat2020.yaml
# çˆ¶ç›®å½•
# â”œâ”€â”€ ultralytics
# â””â”€â”€ datasets
#     â””â”€â”€ GlobalWheat2020  â† ä¸‹è½½åˆ°æ­¤å¤„ (7.0 GB)

# è®­ç»ƒ/éªŒè¯/æµ‹è¯•é›†å¯ä»¥æ˜¯ 1) ç›®å½•ï¼špath/to/imgs, 2) æ–‡ä»¶ï¼špath/to/imgs.txt, æˆ– 3) åˆ—è¡¨ï¼š[path/to/imgs1, path/to/imgs2, ..]
path: ../datasets/GlobalWheat2020 # æ•°æ®é›†æ ¹ç›®å½•
train: # è®­ç»ƒå›¾åƒï¼ˆç›¸å¯¹äº 'path'ï¼‰3422 å¼ å›¾åƒ
  - images/arvalis_1
  - images/arvalis_2
  - images/arvalis_3
  - images/ethz_1
  - images/rres_1
  - images/inrae_1
  - images/usask_1
val: # éªŒè¯å›¾åƒï¼ˆç›¸å¯¹äº 'path'ï¼‰748 å¼ å›¾åƒ (è­¦å‘Š: è®­ç»ƒé›†ä¸­åŒ…å« ethz_1)
  - images/ethz_1
test: # æµ‹è¯•å›¾åƒï¼ˆå¯é€‰ï¼‰1276 å¼ å›¾åƒ
  - images/utokyo_1
  - images/utokyo_2
  - images/nau_1
  - images/uq_1

# ç±»åˆ«
names:
  0: wheat_head

# ä¸‹è½½è„šæœ¬/URLï¼ˆå¯é€‰ï¼‰---------------------------------------------------------------------------------------
download: |
  from ultralytics.utils.downloads import download
  from pathlib import Path

  # ä¸‹è½½
  dir = Path(yaml['path'])  # æ•°æ®é›†æ ¹ç›®å½•
  urls = ['https://zenodo.org/record/4298502/files/global-wheat-codalab-official.zip',
          'https://github.com/ultralytics/yolov5/releases/download/v1.0/GlobalWheat2020_labels.zip']
  download(urls, dir=dir)

  # åˆ›å»ºç›®å½•
  for p in 'annotations', 'images', 'labels':
      (dir / p).mkdir(parents=True, exist_ok=True)

  # ç§»åŠ¨
  for p in 'arvalis_1', 'arvalis_2', 'arvalis_3', 'ethz_1', 'rres_1', 'inrae_1', 'usask_1', \
           'utokyo_1', 'utokyo_2', 'nau_1', 'uq_1':
      (dir / 'global-wheat-codalab-official' / p).rename(dir / 'images' / p)  # ç§»åŠ¨åˆ° /images
      f = (dir / 'global-wheat-codalab-official' / p).with_suffix('.json')  # json æ–‡ä»¶
      if f.exists():
          f.rename((dir / 'annotations' / p).with_suffix('.json'))  # ç§»åŠ¨åˆ° /annotations
